---
import LayoutV2 from "@/layouts/LayoutV2.astro";
import { Icon } from "astro-icon/components";
---

<LayoutV2 title="Contact">
  <!-- Hero Section -->
  <section class="relative py-24 bg-gradient-to-b from-dark-bg via-dark-accent to-dark-bg overflow-hidden">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
      <div class="inline-block px-4 py-2 mb-6 rounded-full bg-brand/10 border border-brand/20">
        <span class="text-brand text-sm font-medium uppercase tracking-wider">Get in Touch</span>
      </div>

      <h1 class="text-5xl md:text-6xl font-bold mb-6">Contact Sales</h1>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto">
        Ready to unlock production AI for your enterprise? Get in touch to discuss your requirements.
      </p>
    </div>

    <!-- Background decoration -->
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-brand/5 rounded-full blur-3xl -z-10">
    </div>
  </section>

  <!-- Contact Form Section -->
  <section class="py-24 bg-dark-bg">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 gap-12">
        <!-- Left: Contact Info -->
        <div>
          <h2 class="text-3xl font-bold mb-6 text-white">Contact Bitropy</h2>
          <p class="text-lg text-gray-300 mb-8 leading-relaxed">
            Let's talk about how Bitropy can help you deploy sovereign AI infrastructure. We'll get back to
            you within 24 hours.
          </p>

          <!-- Contact Details -->
          <div class="space-y-4">
            <div class="flex items-center gap-3 text-gray-300">
              <div class="w-10 h-10 rounded-lg bg-brand/20 flex items-center justify-center">
                <Icon class="w-5 h-5 text-brand" name="bx:bx-envelope" />
              </div>
              <a href="mailto:contact@bitropy.io" class="hover:text-brand transition-colors">
                contact@bitropy.io
              </a>
            </div>

            <div class="flex items-center gap-3 text-gray-300">
              <div class="w-10 h-10 rounded-lg bg-brand/20 flex items-center justify-center">
                <Icon class="w-5 h-5 text-brand" name="bx:bx-map" />
              </div>
              <span>Wroc≈Çaw, Poland & Remote</span>
            </div>

            <div class="flex items-center gap-3 text-gray-300">
              <div class="w-10 h-10 rounded-lg bg-brand/20 flex items-center justify-center">
                <Icon class="w-5 h-5 text-brand" name="bx:bx-time" />
              </div>
              <span>Monday - Friday, 9:00 - 17:00 CET</span>
            </div>
          </div>

          <!-- Social Links -->
          <div class="mt-8 flex gap-4">
            <a
              href="https://www.linkedin.com/company/bitropy/"
              target="_blank"
              rel="noopener"
              class="w-12 h-12 rounded-lg bg-brand/10 hover:bg-brand/20 flex items-center justify-center transition-all">
              <Icon class="w-6 h-6 text-brand" name="bx:bxl-linkedin" />
            </a>
            <a
              href="https://github.com/orgs/Bitropy/"
              target="_blank"
              rel="noopener"
              class="w-12 h-12 rounded-lg bg-brand/10 hover:bg-brand/20 flex items-center justify-center transition-all">
              <Icon class="w-6 h-6 text-brand" name="bx:bxl-github" />
            </a>
          </div>
        </div>

        <!-- Right: Contact Form -->
        <div class="bg-dark-accent/50 border border-brand/20 rounded-2xl p-8">
          <form
            action="https://api.web3forms.com/submit"
            method="POST"
            id="contact-form"
            class="space-y-6"
            data-astro-reload
            novalidate>
            <input type="hidden" name="access_key" value="bdd33d1f-f067-4c01-bf26-88dcae09a40b" />
            <input type="checkbox" class="hidden" style="display:none" name="botcheck" />

            <!-- Full Name -->
            <div>
              <label for="name" class="block text-sm font-medium mb-2 text-gray-300">Full Name</label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="w-full px-4 py-3 bg-dark-bg border border-brand/30 rounded-lg text-white placeholder-gray-500 focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/20 transition"
                placeholder="John Doe" />
            </div>

            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium mb-2 text-gray-300">Email Address</label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-3 bg-dark-bg border border-brand/30 rounded-lg text-white placeholder-gray-500 focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/20 transition"
                placeholder="john@company.com" />
            </div>

            <!-- Organization -->
            <div>
              <label for="organization" class="block text-sm font-medium mb-2 text-gray-300">
                Organization (Optional)
              </label>
              <input
                type="text"
                id="organization"
                name="organization"
                class="w-full px-4 py-3 bg-dark-bg border border-brand/30 rounded-lg text-white placeholder-gray-500 focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/20 transition"
                placeholder="Company Name" />
            </div>

            <!-- Message -->
            <div>
              <label for="message" class="block text-sm font-medium mb-2 text-gray-300">Message</label>
              <textarea
                id="message"
                name="message"
                required
                rows="5"
                class="w-full px-4 py-3 bg-dark-bg border border-brand/30 rounded-lg text-white placeholder-gray-500 focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/20 transition resize-none"
                placeholder="Tell us about your project..."></textarea>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="w-full px-6 py-4 bg-brand hover:bg-brand-dark text-white rounded-lg font-semibold transition-all shadow-lg shadow-[#A898E9]/20 flex items-center justify-center gap-2">
              <Icon class="w-5 h-5" name="bx:bx-send" />
              Send Message
            </button>

            <!-- Result message -->
            <div id="result" class="text-center text-sm"></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust Section -->
  <section class="py-24 bg-gradient-to-b from-dark-bg to-dark-accent">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-3 gap-8 text-center">
        <div>
          <div class="w-16 h-16 rounded-full bg-brand/20 flex items-center justify-center mx-auto mb-4">
            <Icon class="w-8 h-8 text-brand" name="bx:bx-time" />
          </div>
          <h3 class="text-xl font-semibold mb-2 text-white">24h Response Time</h3>
          <p class="text-gray-400">We respond to all inquiries within 24 hours</p>
        </div>

        <div>
          <div class="w-16 h-16 rounded-full bg-brand/20 flex items-center justify-center mx-auto mb-4">
            <Icon class="w-8 h-8 text-brand" name="bx:bx-shield" />
          </div>
          <h3 class="text-xl font-semibold mb-2 text-white">Data Privacy</h3>
          <p class="text-gray-400">Your information is secure and confidential</p>
        </div>

        <div>
          <div class="w-16 h-16 rounded-full bg-brand/20 flex items-center justify-center mx-auto mb-4">
            <Icon class="w-8 h-8 text-brand" name="bx:bx-user-check" />
          </div>
          <h3 class="text-xl font-semibold mb-2 text-white">Expert Consultation</h3>
          <p class="text-gray-400">Speak directly with our technical team</p>
        </div>
      </div>
    </div>
  </section>
</LayoutV2>

<script is:inline>
  document.addEventListener("astro:page-load", () => {
    const form = document.getElementById("contact-form");
    const result = document.getElementById("result");

    if (!form || !result) return;

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      if (!form.checkValidity()) {
        return;
      }

      const formData = new FormData(form);
      const object = Object.fromEntries(formData);
      const json = JSON.stringify(object);

      result.innerHTML = "Sending...";
      result.className = "text-center text-sm text-gray-400";

      try {
        const response = await fetch("https://api.web3forms.com/submit", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: json,
        });

        const data = await response.json();

        if (response.status == 200) {
          result.className = "text-center text-sm text-green-500 font-medium";
          result.innerHTML = data.message;
          form.reset();
        } else {
          result.className = "text-center text-sm text-red-500";
          result.innerHTML = data.message;
        }
      } catch (error) {
        console.log(error);
        result.className = "text-center text-sm text-red-500";
        result.innerHTML = "Something went wrong!";
      }

      setTimeout(() => {
        result.style.display = "none";
      }, 5000);
    });
  });
</script>
